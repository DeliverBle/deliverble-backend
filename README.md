<div align="center">
  <img src="https://user-images.githubusercontent.com/58380158/177714037-73dd20d0-b4f8-410c-bef8-507778783698.png" width="300px" />
</div>

## 🔉 프로젝트 소개 
> 아나운서 쉐도잉으로 키우는 스피치 자신감, 딜리버블

딜리버블은 발성, 발음 등을 개선하여 “잘” 말하고 싶은 사람들이  
**아나운서 쉐도잉**과 **뉴스 리딩**을 통해 스피치 자신감을 키우고, 더 세련된 이미지를 만들도록 도와주는 서비스입니다.  

**프로젝트 기간 (1차)**: SOPT 30th AppJam (2022. 7. 3. ~ 2022. 7. 22.)

**프로젝트 기간 (2차)**: 신규 기능 추가 구현 및 기존 기능 리팩토링 (2022. 7. 22 ~ 진행 중)

<br />

## 👩🏻‍💻 팀원 소개
|                            이우진                            |                            박진형                            |
| :----------------------------------------------------------: | :----------------------------------------------------------: |
| <img src="https://user-images.githubusercontent.com/41055141/180405402-b000b6b3-add2-4887-be25-10e369b6ac82.jpeg" width="200px" /> | <img src="https://user-images.githubusercontent.com/41055141/180405416-9d499cf7-63b8-4eaa-9058-d9d04c0af207.jpeg" width="200px" /> |
|          [@horsehair](https://github.com/horsehair)          |       [@sigridjineth](https://github.com/sigridjineth)       |

## 🛠 기술 스택

### Server Architecture

![deliverble_tech_stack-BE 001](https://user-images.githubusercontent.com/41055141/180383701-6727645d-c323-4d35-88c2-9bca73cc4ee5.jpeg)

### Dependencies Module

```
"dependencies": {
    "@types/cors": "^2.8.12",
    "axios": "^0.27.2",
    "class-validator": "^0.13.2",
    "connect-redis": "^6.1.3",
    "cors": "^2.8.5",
    "express": "^4.18.1",
    "express-session": "^1.17.3",
    "jsonwebtoken": "^8.5.1",
    "memorystore": "^1.6.7",
    "mysql2": "^2.3.3",
    "passport": "^0.6.0",
    "passport-kakao": "^1.0.1",
    "redis": "^3.1.2",
    "shallow-equal-object": "^1.1.1",
    "tslog": "^3.3.3",
    "typeorm": "^0.2.34"
  },
  "devDependencies": {
    "@types/express": "^4.17.13",
    "@types/node": "^18.0.1",
    "@typescript-eslint/eslint-plugin": "^5.30.5",
    "@typescript-eslint/parser": "^5.30.5",
    "dotenv": "^16.0.1",
    "eslint": "^8.19.0",
    "eslint-config-prettier": "^8.5.0",
    "eslint-plugin-prettier": "^4.2.1",
    "husky": "^8.0.1",
    "lint-staged": "^13.0.3",
    "nodemon": "^2.0.19",
    "prettier": "2.7.1",
    "ts-node": "^10.8.2",
    "typescript": "^4.7.4"
  },
 "husky": {
   "hooks": {
     "pre-commit": "yarn test"
   }
 }
```

## 역할 분담

* [이우진](https://github.com/horsehair): 1순위 API 작성, AWS 인프라 관리 & 배포 담당, 웹 프론트엔드/기획 소통 전담, 서버 QA
* [박진형](https://github.com/sigridjineth): 1순위 API 작성, 2순위 API 작성(로그인 및 유사 태그 반환 기능), 우진 코드리뷰어 & 잔소리꾼

## ERD

![deliverble_erd](https://user-images.githubusercontent.com/41055141/180408499-a0d7c4c0-04d6-4e38-80cd-621e0a327a95.png)

## SQL Schema

```
-- MySQL Script generated by MySQL Workbench
-- Fri Jul 22 18:25:23 2022
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
-- -----------------------------------------------------
-- Schema deliverble_new2
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema deliverble_new2
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `deliverble_new2` DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci ;
USE `deliverble_new2` ;

-- -----------------------------------------------------
-- Table `deliverble_new2`.`user`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `deliverble_new2`.`user` ;

CREATE TABLE IF NOT EXISTS `deliverble_new2`.`user` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `kakaoId` BIGINT NOT NULL,
  `nickname` VARCHAR(255) NOT NULL,
  `email` VARCHAR(255) NOT NULL DEFAULT 'NO_EMAIL',
  `gender` ENUM('male', 'female', 'unspecified') NOT NULL DEFAULT 'unspecified',
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 2
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;

CREATE UNIQUE INDEX `IDX_c38c5232df7705ce60e9cefcab` ON `deliverble_new2`.`user` (`kakaoId` ASC) VISIBLE;

CREATE UNIQUE INDEX `IDX_e12875dfb3b1d92d7d7c5377e2` ON `deliverble_new2`.`user` (`email` ASC) VISIBLE;


-- -----------------------------------------------------
-- Table `deliverble_new2`.`highlight`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `deliverble_new2`.`highlight` ;

CREATE TABLE IF NOT EXISTS `deliverble_new2`.`highlight` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `scriptId` INT NOT NULL,
  `startingIndex` INT NOT NULL,
  `endingIndex` INT NOT NULL,
  `user_id` INT NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  CONSTRAINT `FK_8ad2ffdf446a293a81acf5f16a8`
    FOREIGN KEY (`user_id`)
    REFERENCES `deliverble_new2`.`user` (`id`)
    ON DELETE CASCADE)
ENGINE = InnoDB
AUTO_INCREMENT = 2
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;

CREATE UNIQUE INDEX `IDX_dc1656e380fd352fab26db9d7f` ON `deliverble_new2`.`highlight` (`scriptId` ASC, `startingIndex` ASC, `endingIndex` ASC) VISIBLE;

CREATE INDEX `FK_8ad2ffdf446a293a81acf5f16a8` ON `deliverble_new2`.`highlight` (`user_id` ASC) VISIBLE;


-- -----------------------------------------------------
-- Table `deliverble_new2`.`memo`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `deliverble_new2`.`memo` ;

CREATE TABLE IF NOT EXISTS `deliverble_new2`.`memo` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `keyword` VARCHAR(100) NOT NULL,
  `content` VARCHAR(100) NOT NULL,
  `highlightId` INT NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  CONSTRAINT `FK_3dda1c75b4f60390d05075889d2`
    FOREIGN KEY (`highlightId`)
    REFERENCES `deliverble_new2`.`highlight` (`id`)
    ON DELETE CASCADE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;

CREATE INDEX `FK_3dda1c75b4f60390d05075889d2` ON `deliverble_new2`.`memo` (`highlightId` ASC) VISIBLE;


-- -----------------------------------------------------
-- Table `deliverble_new2`.`news`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `deliverble_new2`.`news` ;

CREATE TABLE IF NOT EXISTS `deliverble_new2`.`news` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `title` VARCHAR(100) NOT NULL,
  `category` ENUM('사회', '정치', '경제', '연예', '세계', '과학', '건강', '기술', '분류안됨') NOT NULL DEFAULT '분류안됨',
  `announcer_gender` ENUM('male', 'female', 'unspecified') NOT NULL DEFAULT 'unspecified',
  `channel` ENUM('SBS', 'KBS', 'MBC', '기타', '분류안됨') NOT NULL DEFAULT '분류안됨',
  `link` VARCHAR(1000) NOT NULL,
  `thumbnail` VARCHAR(1000) NOT NULL,
  `suitability` ENUM('상', '중', '하', '분류 안됨') NOT NULL DEFAULT '중',
  `isEmbeddable` VARCHAR(255) NOT NULL,
  `reportDate` DATE NOT NULL,
  `startTimeSeconds` INT NOT NULL,
  `startTimeMilliseconds` INT NOT NULL,
  `endTimeSeconds` INT NOT NULL,
  `endTimeMilliseconds` INT NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 51
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `deliverble_new2`.`script`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `deliverble_new2`.`script` ;

CREATE TABLE IF NOT EXISTS `deliverble_new2`.`script` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `news_id` INT NOT NULL,
  `text` VARCHAR(255) NOT NULL DEFAULT '',
  `startTimeSeconds` INT NOT NULL,
  `startTimeMilliseconds` INT NOT NULL,
  `endTimeSeconds` INT NOT NULL,
  `endTimeMilliseconds` INT NOT NULL,
  PRIMARY KEY (`id`),
  CONSTRAINT `FK_acf705b23a8bf74e2dd388df2e2`
    FOREIGN KEY (`news_id`)
    REFERENCES `deliverble_new2`.`news` (`id`)
    ON DELETE CASCADE)
ENGINE = InnoDB
AUTO_INCREMENT = 224
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;

CREATE INDEX `FK_acf705b23a8bf74e2dd388df2e2` ON `deliverble_new2`.`script` (`news_id` ASC) VISIBLE;


-- -----------------------------------------------------
-- Table `deliverble_new2`.`spacing`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `deliverble_new2`.`spacing` ;

CREATE TABLE IF NOT EXISTS `deliverble_new2`.`spacing` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `scriptId` INT NOT NULL,
  `index` INT NOT NULL,
  `user_id` INT NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  CONSTRAINT `FK_b57b1f2674a7d21e779e99545f3`
    FOREIGN KEY (`user_id`)
    REFERENCES `deliverble_new2`.`user` (`id`)
    ON DELETE CASCADE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;

CREATE INDEX `FK_b57b1f2674a7d21e779e99545f3` ON `deliverble_new2`.`spacing` (`user_id` ASC) VISIBLE;


-- -----------------------------------------------------
-- Table `deliverble_new2`.`tag`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `deliverble_new2`.`tag` ;

CREATE TABLE IF NOT EXISTS `deliverble_new2`.`tag` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(255) NOT NULL,
  `news_id` INT NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  CONSTRAINT `FK_9ed2a04c8c20178ecda188e2485`
    FOREIGN KEY (`news_id`)
    REFERENCES `deliverble_new2`.`news` (`id`)
    ON DELETE CASCADE)
ENGINE = InnoDB
AUTO_INCREMENT = 161
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;

CREATE INDEX `FK_9ed2a04c8c20178ecda188e2485` ON `deliverble_new2`.`tag` (`news_id` ASC) VISIBLE;


-- -----------------------------------------------------
-- Table `deliverble_new2`.`user_favorite_news`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `deliverble_new2`.`user_favorite_news` ;

CREATE TABLE IF NOT EXISTS `deliverble_new2`.`user_favorite_news` (
  `user` BIGINT NOT NULL,
  `news` INT NOT NULL,
  PRIMARY KEY (`user`, `news`),
  CONSTRAINT `FK_5622367b64bb820351f1b62678e`
    FOREIGN KEY (`news`)
    REFERENCES `deliverble_new2`.`news` (`id`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `FK_9f7a4f61985aae93b48507d7af6`
    FOREIGN KEY (`user`)
    REFERENCES `deliverble_new2`.`user` (`kakaoId`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;

CREATE INDEX `IDX_9f7a4f61985aae93b48507d7af` ON `deliverble_new2`.`user_favorite_news` (`user` ASC) VISIBLE;

CREATE INDEX `IDX_5622367b64bb820351f1b62678` ON `deliverble_new2`.`user_favorite_news` (`news` ASC) VISIBLE;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
```



## Coding Convention

* Prettier를 사용한다.
* Commit Convention
  * `feat`: (new feature for the user, not a new feature for build script)
  * `fix`: (bug fix for the user, not a fix to a build script)
  * `docs`: (changes to the documentation)
  * `style`: (formatting, missing semi colons, etc; no production code change)
  * `refactor`: (refactoring production code, eg. renaming a variable)
  * `test`: (adding missing tests, refactoring tests; no production code change)
  * `chore`: (updating grunt tasks etc; no production code change)


```
feat: add hat wobble
^--^  ^------------^
|     |
|     +-> Summary in present tense.
|
+-------> Type: chore, docs, feat, fix, refactor, style, or test.
```

## Branch Strategy

* 모든 작업은 GitHub 이슈를 만들고 해당 이슈를 기준으로 작업한다.
* Pull Request를 요청할 때, 제목에 이슈 번호를 명시하여 어떤 이슈를 해결했는지 작성한다.
* 브랜치는 작성자 이름을 기준으로 이슈번호를 병기한다.
* 별도의 develop 브랜치는 없으며, 모든 production 브랜치는 main을 기준으로 작업한다. (CI/CD 기준 main)

```
e.g) woojin/issue-14
```

## 프로젝트 폴더 구조

```
📦 
├─ .eslintrc.js
├─ .gitignore
├─ .prettierrc.js
├─ LICENSE
├─ README.md
├─ dump.rdb
├─ nodemon.json
├─ ormconfig.ts
├─ package-lock.json
├─ package.json
├─ redis_standalone.yml
├─ src
│  ├─ controllers
│  │  ├─ HighlightController.ts
│  │  ├─ NewsController.ts
│  │  ├─ SpacingController.ts
│  │  ├─ UserController.ts
│  │  ├─ index.ts
│  │  └─ kakao-login.ts
│  ├─ entity
│  │  ├─ Highlight.ts
│  │  ├─ Memo.ts
│  │  ├─ News.ts
│  │  ├─ NotFoundUser.ts
│  │  ├─ Script.ts
│  │  ├─ Spacing.ts
│  │  ├─ Tag.ts
│  │  └─ User.ts
│  ├─ error
│  │  ├─ AccessTokenExpiredError.ts
│  │  ├─ AlreadyLoggedOutError.ts
│  │  ├─ AlreadySignedUpError.ts
│  │  ├─ CustomError.ts
│  │  ├─ DuplicateStartingIndexAndEndingIndex.ts
│  │  ├─ ErrorHandler.ts
│  │  ├─ ResourceNotFoundError.ts
│  │  └─ UserNotFoundError.ts
│  ├─ index.ts
│  ├─ modules
│  │  ├─ responseMessage.ts
│  │  ├─ statusCode.ts
│  │  └─ util.ts
│  ├─ repository
│  │  ├─ HighlightCommandRepository.ts
│  │  ├─ HighlightRepository.ts
│  │  ├─ MemoRepository.ts
│  │  ├─ NewsRepository.ts
│  │  ├─ ScriptQueryRepository.ts
│  │  ├─ SpacingCommandRepository.ts
│  │  ├─ SpacingQueryRepository.ts
│  │  ├─ UserCommandRepository.ts
│  │  └─ UserQueryRepository.ts
│  ├─ routes
│  │  ├─ HighlightRouter.ts
│  │  ├─ NewsRouter.ts
│  │  ├─ SpacingRouter.ts
│  │  ├─ UserRouter.ts
│  │  ├─ index.ts
│  │  └─ kakaoRouter.ts
│  ├─ service
│  │  ├─ HighlightService.ts
│  │  ├─ NewsService.ts
│  │  ├─ SpacingService.ts
│  │  ├─ UserService.ts
│  │  └─ index.ts
│  ├─ shared
│  │  ├─ AuthLink.ts
│  │  └─ common
│  │     ├─ Category.ts
│  │     ├─ Channel.ts
│  │     ├─ Gender.ts
│  │     ├─ Page.ts
│  │     ├─ Suitability.ts
│  │     └─ utils.ts
│  ├─ types.ts
│  ├─ util
│  │  ├─ MockUserToFavorite.ts
│  │  ├─ insertNews.ts
│  │  ├─ insertScript.ts
│  │  ├─ pagination.ts
│  │  └─ redis.ts
│  └─ vo
│     ├─ MemoArrayWrappedObject.ts
│     └─ Time.ts
└─ tsconfig.json
```

## API 명세서

* [Mock API 명세서](https://airy-fang-202.notion.site/Mock-API-8c64a502f6e34b868fa002cf4587ec02) 구현 완료
* [API v1 명세서](https://airy-fang-202.notion.site/v1-16120d6874b84ab5813fde13eae7982e) 구현 완료
* [API v2 명세서](https://www.notion.so/v2-d6e2e35ad67e47a188fb7d096a3d3148) 구현 완료
* [앱잼 서버 최종 과제 보고서](https://airy-fang-202.notion.site/2d07311e74d3400abfacea527e6e60dd) 작성 
